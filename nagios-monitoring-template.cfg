# ============================================
# Nagios Monitoring Configuration Template
# File: /etc/nagios4/conf.d/ecommerce-monitoring.cfg
# ============================================
# Instructions:
# 1. Copy this file to /etc/nagios4/conf.d/ecommerce-monitoring.cfg
# 2. Update the 'address' fields with your deployment URLs
# 3. Test: sudo nagios4 -v /etc/nagios4/nagios.cfg
# 4. Restart: sudo systemctl restart nagios4
# ============================================

# ============================================
# DOCKER LOCAL DEPLOYMENT
# ============================================
define host {
    host_name                   docker-ecommerce
    alias                       Docker E-commerce (Local)
    address                     127.0.0.1
    use                         generic-host
    check_command               check-host-alive
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
    notification_options        d,u,r
}

define service {
    host_name                   docker-ecommerce
    service_description         HTTP Port 8080
    use                         generic-service
    check_command               check_http!-H 127.0.0.1 -p 8080
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

define service {
    host_name                   docker-ecommerce
    service_description         Website Content
    use                         generic-service
    check_command               check_http!-H 127.0.0.1 -p 8080 -s "E-commerce"
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

# ============================================
# ANSIBLE AWS DEPLOYMENT
# ============================================
# UPDATE THIS: Replace with your Ansible S3 website URL
# Example: ansible-demo-1762802001.s3-website-us-east-1.amazonaws.com

define host {
    host_name                   ansible-ecommerce
    alias                       Ansible E-commerce (AWS S3)
    address                     ANSIBLE_URL_HERE
    use                         generic-host
    check_command               check-host-alive
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
    notification_options        d,u,r
}

define service {
    host_name                   ansible-ecommerce
    service_description         HTTP Service
    use                         generic-service
    check_command               check_http!-H ANSIBLE_URL_HERE
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

define service {
    host_name                   ansible-ecommerce
    service_description         Website Content
    use                         generic-service
    check_command               check_http!-H ANSIBLE_URL_HERE -s "E-commerce"
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

define service {
    host_name                   ansible-ecommerce
    service_description         Response Time
    use                         generic-service
    check_command               check_http!-H ANSIBLE_URL_HERE -w 3 -c 5
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

# ============================================
# TERRAFORM AWS DEPLOYMENT
# ============================================
# UPDATE THIS: Replace with your Terraform S3 website URL or CloudFront URL
# Example: terraform-bucket-123.s3-website-us-east-1.amazonaws.com
# Example: d3k7f37vcebxa5.cloudfront.net

define host {
    host_name                   terraform-ecommerce
    alias                       Terraform E-commerce (AWS)
    address                     TERRAFORM_URL_HERE
    use                         generic-host
    check_command               check-host-alive
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
    notification_options        d,u,r
}

define service {
    host_name                   terraform-ecommerce
    service_description         HTTP Service
    use                         generic-service
    check_command               check_http!-H TERRAFORM_URL_HERE
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

define service {
    host_name                   terraform-ecommerce
    service_description         Website Content
    use                         generic-service
    check_command               check_http!-H TERRAFORM_URL_HERE -s "E-commerce"
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

define service {
    host_name                   terraform-ecommerce
    service_description         Response Time
    use                         generic-service
    check_command               check_http!-H TERRAFORM_URL_HERE -w 3 -c 5
    max_check_attempts          3
    check_period                24x7
    contact_groups              admins
}

# ============================================
# QUICK UPDATE GUIDE
# ============================================
# 1. Find and replace "ANSIBLE_URL_HERE" with your Ansible deployment URL
# 2. Find and replace "TERRAFORM_URL_HERE" with your Terraform deployment URL
# 3. Comment out sections you're not using with # at the start of each line
# 4. Test and restart Nagios after changes
# ============================================
